<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Lekce 5: Cykly a podmínky - Python pro ArcGIS</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.1.2, mkdocs-gitbook-1.0.7">
<meta name="author" content="Vojta Barták">
<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../css/style.min.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">

<nav role="navigation">
<ul class="summary">
<li>
<a href=".." target="_blank" class="custom-link">Python pro ArcGIS</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="..">Home</a>
<li class="header">Model Builder</li>

<li>
<a href="../Lekce%201%20Model%20Builder%20I/" class="">Lekce 1: Tvorba modelu</a>
</li>

<li>
<a href="../Lekce%202%20Model%20Builder%20II/" class="">Lekce 2: Uživatelské rozhraní</a>
</li>

<li class="header">Python</li>

<li>
<a href="../Lekce%203%20Jak%20a%20kde%20napsat%20a%20spustit%20program%20v%20Pythonu/" class="">Lekce 3: Rozjezd Pythonu</a>
</li>

<li>
<a href="../Lekce%204%20Prom%C4%9Bnn%C3%A9%20a%20datov%C3%A9%20typy/" class="">Lekce 4: Proměnné a datové typy</a>
</li>

<li>
<a href="./" class="active">Lekce 5: Cykly a podmínky</a>
</li>

<li class="chapter" data-path="about_me/">
<a href="../about_me/">O mně...</a>
<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">

<section class="normal markdown-section">



<h1 id="lekce-5-ridici-struktury-programu-cykly-a-podminky">Lekce 5: Řídící struktury programu - cykly a podmínky</h1>
<p>Řídícími strukturami programu (též struktury řízení chodu programu) se rozumí syntaktické struktury jazyka, umožňující podmíněné a opakované provádění posloupnosti příkazů.</p>
<h2 id="logicke-vyrazy">Logické výrazy</h2>
<p><em>Logický výraz</em> (jinak též <em>pravdivostní výrok</em>) je jakýkoli výrok, kterému lze jednoznačně přisoudit pravdivostní hodnotu, tj. určit, zda je pravdivý či nepravdivý. Přisouzení pravdivostní hodnoty danému výrazu se označuje jako jeho <em>vyhodnocení</em>. Logické výrazy se v programování používají všude tam, kde je třeba provézt nějaký příkaz (či sérii příkazů) pouze tehdy, je-li splněna nějaká podmínka (takovým příkazům se říká <em>podmíněné příkazy</em>). Podmínka pak má podobu logického výrazu, přičemž její splnění/nesplnění je dáno pravdivostní hodnotou tohoto výrazu.</p>
<p>Porovnáním dvou hodnot lze vytvořit jednoduchý logický výraz, jehož pravdivostní hodnota je dána pravdivostí příslušného tvrzení:</p>
<pre><code class="python">&gt;&gt;&gt; 3 &lt; 5
True
&gt;&gt;&gt; 3 &gt; 5
False
</code></pre>

<p>Porovnávat lze i textové řetězce. Porovnání je pak založeno na abecedním pořadí (tj. na tzv. <em>lexikografickém</em> <em>uspořádání</em>), přičemž velká písmena mají přednost před malými:</p>
<pre><code class="python">&gt;&gt;&gt; &quot;ahoj&quot; &lt; &quot;svete&quot;
True
&gt;&gt;&gt; &quot;Ahoj&quot; &lt; &quot;AHOJ&quot;
False
</code></pre>

<p>Rovnost se testuje operátorem <code>==</code> (pozor, nezaměňovat s operací <code>=</code>, která přiřazuje hodnotu proměnné!):</p>
<pre><code class="python">&gt;&gt;&gt; a = 5
&gt;&gt;&gt; a == 5
True
</code></pre>

<p>Nerovnost se testuje buď operátorem <code>!=</code> nebo <code>&lt;&gt;</code>:</p>
<pre><code class="python">&gt;&gt;&gt; a != 5
False
&gt;&gt;&gt; a &lt;&gt; 3
True
</code></pre>

<p>Poněkud složitější je porovnávací operátor <code>is</code>. U čísel a řetězců testuje rovnost stejně jako <code>==</code>, ale u složitějších objektů, jako jsou seznamy, testuje totožnost objektů (tj. zda se jedná o tentýž objekt se shodnou adresou v paměti):</p>
<pre><code class="python">&gt;&gt;&gt; a = 3
&gt;&gt;&gt; b = 3
&gt;&gt;&gt; a is b
True
&gt;&gt;&gt; a = [1,2,3]
&gt;&gt;&gt; b = [1,2,3]
&gt;&gt;&gt; a is b
False
&gt;&gt;&gt; a = b
&gt;&gt;&gt; a is b
True
</code></pre>

<p>Opakem <code>is</code> je operátor <code>is not</code>.</p>
<p>Operátor <code>in</code> testuje, zda je určitý prvek v daném seznamu, případně určitý znak v daném řetězci:</p>
<pre><code class="python">&gt;&gt;&gt; a = [1,2,3]
&gt;&gt;&gt; 2 in a
True
&gt;&gt;&gt; &quot;a&quot; in &quot;ahoj&quot;
True
</code></pre>

<p>Jeho opakem je <code>not in</code>:</p>
<pre><code class="python">&gt;&gt;&gt; a = [1,2,3]
&gt;&gt;&gt; 4 not in a
True
&gt;&gt;&gt; &quot;z&quot; not in &quot;ahoj&quot;
True
</code></pre>

<p>Složené logické výroky lze z jednoduchých vytvářet pomocí tzv. <em>logických operátorů</em> <code>and</code>, <code>or</code> a <code>not</code> (mluvíme pak o tzv. <em>logických operacích</em> s logickými výrazy). Význam těchto operátorů je všeobecně známý z logiky, proto výklad omezíme jen na malou ukázku. Např. pokud chceme otestovat, zda je hodnota nějaké číselné proměnné obsažena v určitém seznamu <em>a zároveň</em> zda je větší než 3, lze to provést pomocí operátoru <code>and</code>:</p>
<pre><code class="python">&gt;&gt;&gt; seznam = [1,2,3,4]
&gt;&gt;&gt; a = 4
&gt;&gt;&gt; a in seznam and a &gt; 3
True
</code></pre>

<p>Struktura složeného výrazu může být libovolně složitá, obsahující libovolné množství dílčích jednoduchých i složitých výrazů. Pokud jsou dílčí výrazy rovněž složené, je často nutné zdůraznit strukturu výrazu závorkami:</p>
<pre><code class="python">&gt;&gt;&gt; a in seznam and (a &gt; 3 or a &lt; -3)
True
</code></pre>

<p>Umístění závorek se řídí známou prioritou operací: nejprve se vždy vyhodnocuje <code>not</code>, pak <code>and</code>, posléze <code>or</code> (viz tabulku níže). Závorky bylo možné psát i v předchozím případě (nicméně to nebylo nutné):</p>
<pre><code class="python">&gt;&gt;&gt; (a in seznam) and (a &gt; 3)
True
</code></pre>

<h2 id="podminene-prikazy">Podmíněné příkazy</h2>
<p>Příkaz se nazývá <em>podmíněný</em>, je-li jeho provedení vázáno splněním nějaké podmínky. Podmínkou přitom může být jakýkoli logický výraz, přičemž splnění podmínky je dáno jeho pravdivostní hodnotou. Syntaxe podmíněných příkazů v Pythonu je značně intuitivní, neboť kopíruje syntaxi běžného jazyka: pokud (anglicky <em>if</em>) platí podmínka, proveď následující příkaz(y):</p>
<pre><code class="python">if podmínka: příkaz
</code></pre>

<p>V případě více příkazů:</p>
<pre><code class="python">if podmínka:
    příkaz 1
    příkaz 2
    příkaz 3
    ...
</code></pre>

<p>Vidíme zde blokovou strukturu kódu, založenou na povinném odsazování. Příkazy vázané na splnění podmínky jsou vůči řádku s klíčovým slovem <code>if</code> odsazené o jednu úroveň (= čtyři mezery) doprava. Jakýkoli příkaz odsazený na úroveň slova <code>if</code> již nebude s podmínkou nijak souviset, tj. provede se bez ohledu na její splnění či nesplnění.</p>
<p>Uveďme příklad:</p>
<pre><code class="python">&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = 6
&gt;&gt;&gt; if a &lt; 6: print a

5
&gt;&gt;&gt; if b &lt; 6: print b

&gt;&gt;&gt; if a &lt; b:
    print a
    print b
    print a,&quot;je mensi nez&quot;,b

5
6
5 je mensi nez 6
</code></pre>

<blockquote>
<p>Pokud zapisujeme podmíněný příkaz do okna Python Shell, je po ukončení zápisu třeba stisknout klávesu <code>Enter</code> hned dvakrát. Druhým stisknutím klávesy <code>Enter</code> dáváme interpretu najevo, že jsme již skončili se zápisem a celý blok může být interpretován (tj. proveden). To je důvod, proč za posledním řádkem zápisu je vždy jeden prázdný řádek.</p>
</blockquote>
<p>Vedle specifikace, co se má provézt za příkazy v případě splnění nějaké podmínky, lze také programu říct, co má provézt za příkazy, pokud naopak podmínka splněna není. Syntaxe je opět intuitivní: <em>pokud</em> (<em>if</em>) platí podmínka, proveď následující příkaz(y), <em>jinak</em> (anglicky <em>else</em>) proveď alternativní příkaz(y):</p>
<pre><code class="python">if podmínka:
    příkaz 1
    příkaz 2
else:
    příkaz 3
    příkaz 4
</code></pre>

<p>Konkrétním příklad tentokrát zapíšeme pomocí skriptu:</p>
<pre><code class="python">a = 5
b = 6
if a == b:
    print(str(a) + &quot; se rovna &quot; + str(b))
else:
    print(str(a) + &quot; se nerovna &quot; + str(b))
</code></pre>

<p>Po spuštění skriptu se v okně Python Shell vypíše:</p>
<pre><code class="python">5 se nerovna 6
</code></pre>

<p>Často také nastává případ, že potřebujeme postupně otestovat více různých podmínek, při jejichž splnění se vždy má provést odpovídající příkazy. Struktura zápisu je: <em>pokud</em> platí podmínka 1, proveď příkaz(y) 1, <em>jinak</em> <em>pokud</em> platí podmínka 2, proveď příkaz(y) 2, <em>jinak</em> proveď příkaz(y) 3. Podmínek je přitom možné za sebe zřetězit libovolné množství a celý zápis může, ale nemusí být ukončen závěrečnou částí <em>else</em>, za níž následují příkazy provedené v případě, kdy není splněna žádná z předchozích podmínek.</p>
<p>Jednou možností, jak výše popsané schéma realizovat, je následující:</p>
<pre><code class="python">a = 5
b = 6
if a == b:
    print a,&quot;se rovna&quot;,b
else:
    if a &lt; b:
        print a,&quot;je mensi nez&quot;,b
    else:
        print a,&quot;je vetsi nez&quot;,b
</code></pre>

<p>Jak je vidět, tímto způsobem dochází při zřetězení podmínek k postupnému zanořování dalších a dalších podmíněných příkazů do stále hlubší úrovně, což by při větším množství testovaných podmínek nebylo příliš přehledné. Z toho důvodu existuje v Pythonu alternativní způsob zápisu, spočívající v použití klíčového slova <code>elif</code>, které je vlastně zkráceninou <code>else</code> <code>if</code>. Způsob použití je patrný z ukázky (opět platí, že sekvence <code>if</code>-<code>elif</code>-<code>elif</code>-...-<code>elif</code> může a nemusí být ukončena částí <code>else</code>):</p>
<pre><code class="python">a = 5
b = 6
if a == b:
    print a,&quot;se rovna&quot;,b
elif a &lt; b:
    print a,&quot;je mensi nez&quot;,b
else:
    print a,&quot;je vetsi nez&quot;,b
</code></pre>

<h2 id="cyklus-while">Cyklus <code>while</code></h2>
<p>Někdy potřebujeme provádět nějaký příkaz či sérii příkazů opakovaně, dokud nenastane (či naopak neskončí) platnost nějaké podmínky. K tomu slouží cyklus <em>while</em>. V Pythonu je jeho syntaxe následující:</p>
<pre><code class="python">while podminka:
    příkaz 1
    příkaz 2
    ...
    příkaz n
</code></pre>

<p>Dokud podmínka platí, bude se neustále provádět posloupnost příkazů 1, 2, ... , n. Je důležité, aby v rámci těchto příkazů dříve či později došlo k tomu, že podmínka již neplatí. V opačném případě by vznikl tzv. <em>nekonečný cyklus</em>. Program bychom pak museli „násilně“ přerušit klávesovou zkratkou <code>Ctrl</code>+<code>C</code>, příp. v krajním případě pomocí Správce úloh systému Windows.</p>
<p>Příkladem použití cyklu <code>while</code> může být výpočet faktoriálu daného přirozeného čísla, třeba 20:</p>
<pre><code class="python">n = 20
fakt = 1
i = 2
while i &lt;= n:
    fakt = fakt * i
    i = i + 1
print(fakt)
</code></pre>

<p>Podmínkou pro pokračování cyklu je zde platnost výroku <code>i &lt;= n</code>. Tento výrok zcela jistě jednou platit přestane, neboť v každém kroku je hodnota proměnné <code>i</code> o jednotku zvětšena, takže jednou určitě překročí hodnotu <code>n</code>. Jakmile se tak stane, cyklus se již provádět nebude a program bude pokračovat prováděním příkazů (případně) uvedených za cyklem, tj. odsazených na úroveň slova <code>while</code>. V našem případě vytiskne výsledek do okna Python Shell:</p>
<pre><code class="python">2432902008176640000
</code></pre>

<p>Pro různé hodnoty proměnné <code>n</code> budeme samozřejmě dostávat různé výsledky faktoriálu. </p>
<p>Cyklus <code>while</code> se dá vlastně považovat za zvláštní druh podmíněného příkazu, neboť určuje, co má program provést v případě splnění nějaké podmínky. Dokonce ho lze zkombinovat s klauzulí <code>else</code>, za níž následuje posloupnost příkazů, která se má provést, pakliže již podmínka splněna není (tj. po konci celého cyklu):</p>
<pre><code class="python">while podmínka:
    příkazy 1 až n
else:
    příkazy n+1 až m
</code></pre>

<p>Lze namítnout, že stejně se bude program chovat, pokud namísto části <code>else</code> napíšeme příkazy n+1 až m za cyklus na úroveň slova <code>while</code>. To je pravda a použití <code>else</code> u cyklu <code>while</code> je skutečně velmi řídké. Přesto však není tato možnost zcela bez účelu, jak uvidíme v kapitole o příkazech <code>break</code> a <code>continue</code>.</p>
<h2 id="cyklus-for">Cyklus <code>for</code></h2>
<p>Cyklus <code>for</code> použijeme všude tam, kde chceme procházet nějaký seznam a s každou jeho položkou něco vykonat. Syntax je následující: </p>
<pre><code class="python">for polozka in seznam:
    příkaz 1 (ve kterém se může použít proměnná položka)
    příkaz 2 (ve kterém se může použít proměnná položka)
    ...
</code></pre>

<p>Např. můžeme jednotlivé položky seznamu jednoduše vytisknout:</p>
<pre><code class="python">seznam = [0,&quot;jedna&quot;,2,&quot;tri&quot;,4,&quot;pet&quot;]
for i in seznam: 
    print(i)
</code></pre>

<p>Výsledkem bude výpis</p>
<pre><code class="python">0
jedna
2
tri
4
pet
</code></pre>

<p>Stejnou úlohu by šlo vyřešit i pomocí cyklu <code>while</code>:</p>
<pre><code class="python">i = 0
while i &lt; len(seznam):
    print seznam[i]
    i = i + 1
</code></pre>

<p>Cyklus <code>for</code> lze využít všude tam, kdy dopředu víme, jak dlouhý náš cyklus bude. V případě, že např. chceme nějakou posloupnost příkazů opakovat 20krát, stačí si vyrobit seznam dané délky a ten cyklem <code>for</code> projít. Položky procházeného seznamu přitom vůbec nemusíme v jednotlivých příkazech použít:</p>
<pre><code class="python">for i in [1]*20:
    print(&quot;Nebudu rušit při hodině hlasitým krkáním.&quot;)
</code></pre>

<p>Po spuštění se vypíše</p>
<pre><code class="python">Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
Nebudu rušit při hodině hlasitým krkáním.
</code></pre>

<p>Často se hodí procházet seznam čísel od jedné do <em>n</em> (třeba do dvaceti). K tomu může dobře posloužit funkce <code>range</code>:</p>
<pre><code class="python">&gt;&gt;&gt; range(20) # Vrátí seznam délky 20, začíná se nulou
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]

&gt;&gt;&gt; range(5, 10) # Vrátí seznam od 5 do 9
[5, 6, 7, 8, 9]

&gt;&gt;&gt; range(5, 50, 3) # Vrátí seznam od 5 do 49 s krokem 3
[5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35, 38, 41, 44, 47]

&gt;&gt;&gt; range(50, 5, -3) # Vrátí seznam od 50 do 6 s krokem -3
[50, 47, 44, 41, 38, 35, 32, 29, 26, 23, 20, 17, 14, 11, 8]
</code></pre>

<p>Výše uvedený výpočet faktoriálu by tedy mohl vypadat i takto:</p>
<pre><code class="python">n = 20
fakt = 1
for i in range(n):
    fakt = fakt * i
print(fakt)
</code></pre>

<p>Cyklus <code>for</code> je možné i vnořit do hranatých závorek a vytvořit tak seznam. Následující kód vytváří seznam druhých mocnin čísel od 1 do 10:</p>
<pre><code class="python">&gt;&gt;&gt; a = [x**2 for x in range(1,11)]
&gt;&gt;&gt; a
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
</code></pre>

<p>Samozřejmě bychom stejný seznam mohli vytvořit i méně stručně:</p>
<pre><code class="python">&gt;&gt;&gt; a = []
&gt;&gt;&gt; for x in range(1,11): a.append(x**2)
&gt;&gt;&gt; a
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
</code></pre>

<p>První způsob je zjevně elegantnější a u zkušenějších programátorů se s ním setkáte častěji.</p>
<h2 id="prikazy-break-a-continue">Příkazy <code>break</code> a <code>continue</code></h2>
<p>Příkazy <code>break</code> (anglicky <em>přeruš</em>) a <code>continue</code> (anglicky <em>pokračuj</em>) slouží k přerušení cyklu, nastane-li pro to nějaký důvod. Typicky se proto používají jako součást podmíněného příkazu, jak je vidět z následujícího schematického znázornění syntaxe příkazu <code>break</code> (uvádíme verzi s cyklem <code>while</code> i verzi s cyklem <code>for</code>):</p>
<pre><code class="python"># Verze s cyklem while:
while podmínka1:
    první série příkazů
    if podmínka2:
        druhá série příkazů
        break
    else:
        třetí série příkazů
else:
    čtvrtá série příkazů
pátá série příkazů

# Verze s cyklem for:
for položka in seznam:
    první série příkazů
    if podmínka2:
        druhá série příkazů
        break
    else:
        třetí série příkazů
else:
    čtvrtá série příkazů
pátá série příkazů
</code></pre>

<p>(První <code>else</code> se vztahuje k <code>if</code>, zatímco druhé <code>else</code> k cyklu <code>while</code> resp. <code>for</code>.)</p>
<p>Příkaz <code>break</code> způsobí okamžité přerušení cyklu, přičemž pokud existuje (což nemusí!) i část <code>else</code> vztahující se k cyklu, pokračuje program až za ní. V naší schematické ukázce to znamená, že jakmile v nějakém kroku (iteraci) cyklu platí podmínka u <code>if</code>, tj. narazí se na příkaz <code>break</code>, program automaticky cyklus přeruší a pokračuje prováděním páté série příkazů.</p>
<p>Ukázkou použití příkazu <code>break</code> u cyklu <code>for</code> může být např. skript hledající nějakou konkrétní položku (např. číslo 20) v nějakém seznamu:</p>
<pre><code class="python">for cislo in seznam:
    if cislo == 20:
        print(&quot;Prave jsem nasel cislo 20!&quot;)
        break
else: print(&quot;Cislo 20 v seznamu neni!&quot;)
</code></pre>

<p>Příkaz <code>continue</code> způsobí, že je přerušen pouze právě probíhající běh cyklu a program pokračuje dalším krokem (iterací) cyklu. Bývá používán méně často než příkaz <code>break</code>, neboť většinou lze jeho použití nahradit vhodně zvoleným podmíněným příkazem. Z tohoto důvodu nebudeme uvádět ukázku.</p>
<h2 id="shrnuti">Shrnutí</h2>
<h2 id="ulohy">Úlohy</h2>


</section>

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../js/main.js"></script>
<script src="../js/gitbook.min.js"></script>
<script src="../js/theme.min.js"></script>
</body>
</html>